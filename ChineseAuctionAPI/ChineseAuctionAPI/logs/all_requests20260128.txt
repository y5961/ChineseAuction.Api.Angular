2026-01-28 17:29:10.683 +02:00 [INF] Starting web host - Monitoring all requests
2026-01-28 17:29:14.026 +02:00 [INF] HTTP GET /swagger/index.html responded 200 in 87.2366 ms
2026-01-28 17:29:14.350 +02:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 27.8176 ms
2026-01-28 17:37:05.907 +02:00 [INF] שולף את כל החבילות.
2026-01-28 17:37:06.528 +02:00 [INF] Attempting to retrieve all gifts.
2026-01-28 17:37:06.536 +02:00 [INF] שולף את רשימת כל המתנות מהמאגר.
2026-01-28 17:37:09.358 +02:00 [INF] HTTP GET /api/Packages responded 200 in 4202.8540 ms
2026-01-28 17:37:09.388 +02:00 [INF] נשלפו בהצלחה 7 מתנות.
2026-01-28 17:37:09.439 +02:00 [INF] HTTP GET /api/Gift responded 200 in 2932.5467 ms
2026-01-28 17:37:11.783 +02:00 [INF] Attempting to retrieve all gifts.
2026-01-28 17:37:11.788 +02:00 [INF] שולף את רשימת כל המתנות מהמאגר.
2026-01-28 17:37:11.905 +02:00 [INF] נשלפו בהצלחה 7 מתנות.
2026-01-28 17:37:11.906 +02:00 [INF] HTTP GET /api/Gift responded 200 in 140.3074 ms
2026-01-28 17:37:13.900 +02:00 [INF] שולף את כל החבילות.
2026-01-28 17:37:13.916 +02:00 [INF] HTTP GET /api/Packages responded 200 in 18.9471 ms
2026-01-28 17:37:16.074 +02:00 [INF] Attempting to retrieve all gifts.
2026-01-28 17:37:16.078 +02:00 [INF] שולף את רשימת כל המתנות מהמאגר.
2026-01-28 17:37:16.094 +02:00 [INF] נשלפו בהצלחה 7 מתנות.
2026-01-28 17:37:16.098 +02:00 [INF] HTTP GET /api/Gift responded 200 in 34.9278 ms
2026-01-28 17:38:07.709 +02:00 [INF] HTTP GET /swagger/index.html responded 200 in 123.7970 ms
2026-01-28 17:38:08.287 +02:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 93.3134 ms
2026-01-28 19:02:35.766 +02:00 [INF] Starting web host - Monitoring all requests
2026-01-28 19:02:39.651 +02:00 [INF] HTTP GET /swagger/index.html responded 200 in 288.8462 ms
2026-01-28 19:02:40.043 +02:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 107.2265 ms
2026-01-28 19:04:00.893 +02:00 [INF] HTTP GET /swagger/index.html responded 200 in 175.8350 ms
2026-01-28 19:04:01.861 +02:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 215.9145 ms
2026-01-28 19:18:35.852 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 19:18:35.863 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 19:18:42.236 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 7406.0294 ms
2026-01-28 19:21:33.130 +02:00 [INF] Attempting to retrieve all gifts.
2026-01-28 19:21:33.138 +02:00 [INF] שולף את רשימת כל המתנות מהמאגר.
2026-01-28 19:21:33.536 +02:00 [INF] נשלפו בהצלחה 7 מתנות.
2026-01-28 19:21:33.610 +02:00 [INF] HTTP GET /api/Gift responded 200 in 509.4297 ms
2026-01-28 19:21:35.846 +02:00 [INF] שולף את כל החבילות.
2026-01-28 19:21:36.025 +02:00 [INF] HTTP GET /api/Packages responded 200 in 216.0450 ms
2026-01-28 19:21:38.054 +02:00 [INF] Attempting to retrieve all gifts.
2026-01-28 19:21:38.060 +02:00 [INF] שולף את רשימת כל המתנות מהמאגר.
2026-01-28 19:21:38.107 +02:00 [INF] נשלפו בהצלחה 7 מתנות.
2026-01-28 19:21:38.115 +02:00 [INF] HTTP GET /api/Gift responded 200 in 64.3702 ms
2026-01-28 19:21:42.543 +02:00 [INF] Attempting to retrieve all gifts.
2026-01-28 19:21:42.548 +02:00 [INF] שולף את רשימת כל המתנות מהמאגר.
2026-01-28 19:21:42.571 +02:00 [INF] נשלפו בהצלחה 7 מתנות.
2026-01-28 19:21:42.581 +02:00 [INF] HTTP GET /api/Gift responded 200 in 50.2754 ms
2026-01-28 19:22:21.150 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 19:22:21.156 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 19:22:21.205 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 58.7127 ms
2026-01-28 19:22:28.240 +02:00 [INF] שולף את כל החבילות.
2026-01-28 19:22:28.264 +02:00 [INF] HTTP GET /api/Packages responded 200 in 26.8856 ms
2026-01-28 19:22:36.909 +02:00 [INF] Attempting to retrieve all gifts.
2026-01-28 19:22:36.913 +02:00 [INF] שולף את רשימת כל המתנות מהמאגר.
2026-01-28 19:22:36.936 +02:00 [INF] נשלפו בהצלחה 7 מתנות.
2026-01-28 19:22:36.944 +02:00 [INF] HTTP GET /api/Gift responded 200 in 35.9102 ms
2026-01-28 19:22:39.487 +02:00 [INF] Attempting to retrieve all gifts.
2026-01-28 19:22:39.494 +02:00 [INF] שולף את רשימת כל המתנות מהמאגר.
2026-01-28 19:22:39.513 +02:00 [INF] נשלפו בהצלחה 7 מתנות.
2026-01-28 19:22:39.523 +02:00 [INF] HTTP GET /api/Gift responded 200 in 38.4457 ms
2026-01-28 19:24:54.808 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 19:24:54.811 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 19:24:54.871 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 69.7757 ms
2026-01-28 19:25:11.193 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 19:25:11.197 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 19:25:11.233 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 41.5985 ms
2026-01-28 19:25:16.188 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 19:25:16.193 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 19:25:16.256 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 69.8096 ms
2026-01-28 19:25:17.944 +02:00 [INF] שולף את כל החבילות.
2026-01-28 19:25:17.979 +02:00 [INF] HTTP GET /api/Packages responded 200 in 42.6832 ms
2026-01-28 19:25:19.793 +02:00 [INF] Attempting to retrieve all gifts.
2026-01-28 19:25:19.798 +02:00 [INF] שולף את רשימת כל המתנות מהמאגר.
2026-01-28 19:25:19.817 +02:00 [INF] נשלפו בהצלחה 7 מתנות.
2026-01-28 19:25:19.824 +02:00 [INF] HTTP GET /api/Gift responded 200 in 31.7827 ms
2026-01-28 19:25:20.636 +02:00 [INF] שולף את כל החבילות.
2026-01-28 19:25:20.656 +02:00 [INF] HTTP GET /api/Packages responded 200 in 20.7345 ms
2026-01-28 19:50:01.811 +02:00 [INF] Attempting to retrieve all gifts.
2026-01-28 19:50:01.817 +02:00 [INF] שולף את רשימת כל המתנות מהמאגר.
2026-01-28 19:50:02.033 +02:00 [INF] נשלפו בהצלחה 7 מתנות.
2026-01-28 19:50:02.043 +02:00 [INF] HTTP GET /api/Gift responded 200 in 232.6580 ms
2026-01-28 19:50:38.251 +02:00 [INF] שולף את כל החבילות.
2026-01-28 19:50:38.315 +02:00 [INF] HTTP GET /api/Packages responded 200 in 69.3387 ms
2026-01-28 19:58:15.666 +02:00 [INF] שולף את כל החבילות.
2026-01-28 19:58:15.668 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 19:58:15.681 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 19:58:15.871 +02:00 [INF] HTTP GET /api/Packages responded 200 in 206.1107 ms
2026-01-28 19:58:15.901 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 235.9887 ms
2026-01-28 20:53:24.781 +02:00 [INF] Starting web host - Monitoring all requests
2026-01-28 20:53:28.061 +02:00 [INF] HTTP GET /swagger/index.html responded 200 in 237.8878 ms
2026-01-28 20:53:28.552 +02:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 121.8154 ms
2026-01-28 21:07:52.887 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 21:07:52.910 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 21:07:53.716 +02:00 [INF] שולף את כל החבילות.
2026-01-28 21:07:58.068 +02:00 [INF] HTTP GET /api/Packages responded 200 in 4380.2772 ms
2026-01-28 21:07:58.132 +02:00 [INF] שולף את כל החבילות.
2026-01-28 21:07:58.246 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 6163.6877 ms
2026-01-28 21:07:58.373 +02:00 [INF] HTTP GET /api/Packages responded 200 in 272.7487 ms
2026-01-28 21:22:53.152 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 21:22:53.166 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 21:22:53.422 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 278.5021 ms
2026-01-28 21:22:58.063 +02:00 [INF] שולף את כל החבילות.
2026-01-28 21:22:58.064 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 21:22:58.077 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 21:22:58.103 +02:00 [INF] HTTP GET /api/Packages responded 200 in 49.7650 ms
2026-01-28 21:22:58.124 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 70.8247 ms
2026-01-28 21:22:59.825 +02:00 [INF] מעדכן/מוסיף מתנה 0 להזמנה 0 בכמות 0.
2026-01-28 21:23:00.517 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'ChineseAuctionAPI.Data.SaleContextDB'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-28 21:23:00.859 +02:00 [ERR] שגיאה בעת עדכון מתנה 0 בהזמנה 0.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ChineseAuctionAPI.Repositories.OrderRepo.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 IdGift, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Repositories\OrderRepo.cs:line 99
   at ChineseAuctionAPI.Services.OrderService.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 giftId, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\OrderService.cs:line 27
2026-01-28 21:23:01.272 +02:00 [ERR] HTTP POST /api/Orders/add-gift responded 500 in 1496.9757 ms
2026-01-28 21:23:01.715 +02:00 [INF] מעדכן/מוסיף מתנה 0 להזמנה 0 בכמות 0.
2026-01-28 21:23:01.753 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'ChineseAuctionAPI.Data.SaleContextDB'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-28 21:23:02.092 +02:00 [ERR] שגיאה בעת עדכון מתנה 0 בהזמנה 0.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ChineseAuctionAPI.Repositories.OrderRepo.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 IdGift, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Repositories\OrderRepo.cs:line 99
   at ChineseAuctionAPI.Services.OrderService.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 giftId, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\OrderService.cs:line 27
2026-01-28 21:23:02.404 +02:00 [ERR] HTTP POST /api/Orders/add-gift responded 500 in 691.6594 ms
2026-01-28 21:23:03.083 +02:00 [INF] מעדכן/מוסיף מתנה 0 להזמנה 0 בכמות 0.
2026-01-28 21:23:03.140 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'ChineseAuctionAPI.Data.SaleContextDB'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-28 21:23:03.418 +02:00 [ERR] שגיאה בעת עדכון מתנה 0 בהזמנה 0.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ChineseAuctionAPI.Repositories.OrderRepo.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 IdGift, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Repositories\OrderRepo.cs:line 99
   at ChineseAuctionAPI.Services.OrderService.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 giftId, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\OrderService.cs:line 27
2026-01-28 21:23:03.685 +02:00 [ERR] HTTP POST /api/Orders/add-gift responded 500 in 603.9743 ms
2026-01-28 21:23:03.826 +02:00 [INF] מעדכן/מוסיף מתנה 0 להזמנה 0 בכמות 0.
2026-01-28 21:23:03.851 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'ChineseAuctionAPI.Data.SaleContextDB'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-28 21:23:04.101 +02:00 [ERR] שגיאה בעת עדכון מתנה 0 בהזמנה 0.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ChineseAuctionAPI.Repositories.OrderRepo.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 IdGift, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Repositories\OrderRepo.cs:line 99
   at ChineseAuctionAPI.Services.OrderService.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 giftId, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\OrderService.cs:line 27
2026-01-28 21:23:04.394 +02:00 [ERR] HTTP POST /api/Orders/add-gift responded 500 in 569.6408 ms
2026-01-28 21:23:04.646 +02:00 [INF] מעדכן/מוסיף מתנה 0 להזמנה 0 בכמות 0.
2026-01-28 21:23:04.707 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'ChineseAuctionAPI.Data.SaleContextDB'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-28 21:23:04.963 +02:00 [ERR] שגיאה בעת עדכון מתנה 0 בהזמנה 0.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ChineseAuctionAPI.Repositories.OrderRepo.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 IdGift, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Repositories\OrderRepo.cs:line 99
   at ChineseAuctionAPI.Services.OrderService.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 giftId, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\OrderService.cs:line 27
2026-01-28 21:23:05.234 +02:00 [ERR] HTTP POST /api/Orders/add-gift responded 500 in 589.1702 ms
2026-01-28 21:23:06.941 +02:00 [INF] מעדכן/מוסיף מתנה 0 להזמנה 0 בכמות 0.
2026-01-28 21:23:06.979 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'ChineseAuctionAPI.Data.SaleContextDB'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-28 21:23:07.266 +02:00 [ERR] שגיאה בעת עדכון מתנה 0 בהזמנה 0.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ChineseAuctionAPI.Repositories.OrderRepo.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 IdGift, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Repositories\OrderRepo.cs:line 99
   at ChineseAuctionAPI.Services.OrderService.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 giftId, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\OrderService.cs:line 27
2026-01-28 21:23:07.284 +02:00 [INF] מעדכן/מוסיף מתנה 0 להזמנה 0 בכמות 0.
2026-01-28 21:23:07.543 +02:00 [INF] מעדכן/מוסיף מתנה 0 להזמנה 0 בכמות 0.
2026-01-28 21:23:07.615 +02:00 [ERR] HTTP POST /api/Orders/add-gift responded 500 in 677.5330 ms
2026-01-28 21:23:07.674 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'ChineseAuctionAPI.Data.SaleContextDB'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-28 21:23:07.675 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'ChineseAuctionAPI.Data.SaleContextDB'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-28 21:23:07.984 +02:00 [ERR] שגיאה בעת עדכון מתנה 0 בהזמנה 0.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ChineseAuctionAPI.Repositories.OrderRepo.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 IdGift, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Repositories\OrderRepo.cs:line 99
   at ChineseAuctionAPI.Services.OrderService.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 giftId, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\OrderService.cs:line 27
2026-01-28 21:23:08.004 +02:00 [INF] מעדכן/מוסיף מתנה 0 להזמנה 0 בכמות 0.
2026-01-28 21:23:08.288 +02:00 [ERR] שגיאה בעת עדכון מתנה 0 בהזמנה 0.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ChineseAuctionAPI.Repositories.OrderRepo.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 IdGift, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Repositories\OrderRepo.cs:line 99
   at ChineseAuctionAPI.Services.OrderService.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 giftId, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\OrderService.cs:line 27
2026-01-28 21:23:08.558 +02:00 [ERR] HTTP POST /api/Orders/add-gift responded 500 in 1275.3030 ms
2026-01-28 21:23:08.585 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'ChineseAuctionAPI.Data.SaleContextDB'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-28 21:23:08.817 +02:00 [ERR] HTTP POST /api/Orders/add-gift responded 500 in 1275.0876 ms
2026-01-28 21:23:09.042 +02:00 [ERR] שגיאה בעת עדכון מתנה 0 בהזמנה 0.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ChineseAuctionAPI.Repositories.OrderRepo.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 IdGift, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Repositories\OrderRepo.cs:line 99
   at ChineseAuctionAPI.Services.OrderService.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 giftId, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\OrderService.cs:line 27
2026-01-28 21:23:09.331 +02:00 [ERR] HTTP POST /api/Orders/add-gift responded 500 in 1327.8805 ms
2026-01-28 21:23:17.517 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 21:23:17.520 +02:00 [INF] שולף את כל החבילות.
2026-01-28 21:23:17.531 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 21:23:17.547 +02:00 [INF] HTTP GET /api/Packages responded 200 in 28.7197 ms
2026-01-28 21:23:17.563 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 48.1390 ms
2026-01-28 21:23:17.656 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 21:23:17.659 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 21:23:17.676 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 20.8344 ms
2026-01-28 21:23:20.955 +02:00 [INF] מעדכן/מוסיף מתנה 0 להזמנה 0 בכמות 0.
2026-01-28 21:23:21.017 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'ChineseAuctionAPI.Data.SaleContextDB'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-28 21:23:21.313 +02:00 [ERR] שגיאה בעת עדכון מתנה 0 בהזמנה 0.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ChineseAuctionAPI.Repositories.OrderRepo.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 IdGift, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Repositories\OrderRepo.cs:line 99
   at ChineseAuctionAPI.Services.OrderService.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 giftId, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\OrderService.cs:line 27
2026-01-28 21:23:21.584 +02:00 [ERR] HTTP POST /api/Orders/add-gift responded 500 in 630.2400 ms
2026-01-28 21:24:15.872 +02:00 [INF] מעדכן/מוסיף מתנה 0 להזמנה 0 בכמות 0.
2026-01-28 21:24:15.949 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'ChineseAuctionAPI.Data.SaleContextDB'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-28 21:24:16.184 +02:00 [ERR] שגיאה בעת עדכון מתנה 0 בהזמנה 0.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ChineseAuctionAPI.Repositories.OrderRepo.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 IdGift, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Repositories\OrderRepo.cs:line 99
   at ChineseAuctionAPI.Services.OrderService.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 giftId, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\OrderService.cs:line 27
2026-01-28 21:24:16.451 +02:00 [ERR] HTTP POST /api/Orders/add-gift responded 500 in 580.0038 ms
2026-01-28 21:24:20.489 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 21:24:20.513 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 21:24:20.575 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 89.0721 ms
2026-01-28 21:24:20.579 +02:00 [INF] שולף את כל החבילות.
2026-01-28 21:24:20.599 +02:00 [INF] HTTP GET /api/Packages responded 200 in 20.7258 ms
2026-01-28 21:24:20.623 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 21:24:20.626 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 21:24:20.641 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 18.6501 ms
2026-01-28 21:24:21.526 +02:00 [INF] מעדכן/מוסיף מתנה 0 להזמנה 0 בכמות 0.
2026-01-28 21:24:21.557 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'ChineseAuctionAPI.Data.SaleContextDB'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-28 21:24:21.808 +02:00 [ERR] שגיאה בעת עדכון מתנה 0 בהזמנה 0.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7f95e6f9-1ed4-4900-a418-4aa7f76dada6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ChineseAuctionAPI.Repositories.OrderRepo.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 IdGift, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Repositories\OrderRepo.cs:line 99
   at ChineseAuctionAPI.Services.OrderService.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 giftId, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\OrderService.cs:line 27
2026-01-28 21:24:22.081 +02:00 [ERR] HTTP POST /api/Orders/add-gift responded 500 in 555.4791 ms
2026-01-28 21:26:31.847 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 21:26:31.886 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 21:26:31.935 +02:00 [INF] שולף את כל החבילות.
2026-01-28 21:26:31.959 +02:00 [INF] HTTP GET /api/Packages responded 200 in 24.5607 ms
2026-01-28 21:26:31.987 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 148.2218 ms
2026-01-28 21:26:32.021 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 21:26:32.026 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 21:26:32.046 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 26.9233 ms
2026-01-28 21:26:42.762 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 21:26:42.769 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 21:26:42.793 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 31.8442 ms
2026-01-28 21:26:42.884 +02:00 [INF] שולף את כל החבילות.
2026-01-28 21:26:42.886 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 21:26:42.893 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 21:26:42.901 +02:00 [INF] HTTP GET /api/Packages responded 200 in 18.3951 ms
2026-01-28 21:26:42.929 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 43.0379 ms
2026-01-28 21:26:48.499 +02:00 [INF] שולף את כל החבילות.
2026-01-28 21:26:48.499 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 21:26:48.529 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 21:26:48.531 +02:00 [INF] HTTP GET /api/Packages responded 200 in 32.5227 ms
2026-01-28 21:26:48.544 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 46.7036 ms
2026-01-28 21:26:48.625 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 21:26:48.628 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 21:26:48.646 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 26.1930 ms
2026-01-28 21:26:50.116 +02:00 [INF] מעדכן/מוסיף מתנה 0 להזמנה 0 בכמות 0.
2026-01-28 21:26:50.194 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'ChineseAuctionAPI.Data.SaleContextDB'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:9f6c9b48-e581-4a92-bab4-fb37d6e2c923
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:9f6c9b48-e581-4a92-bab4-fb37d6e2c923
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-28 21:26:50.419 +02:00 [ERR] שגיאה בעת עדכון מתנה 0 בהזמנה 0.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:9f6c9b48-e581-4a92-bab4-fb37d6e2c923
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ChineseAuctionAPI.Repositories.OrderRepo.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 IdGift, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Repositories\OrderRepo.cs:line 99
   at ChineseAuctionAPI.Services.OrderService.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 giftId, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\OrderService.cs:line 27
2026-01-28 21:26:50.664 +02:00 [ERR] HTTP POST /api/Orders/add-gift responded 500 in 549.1250 ms
2026-01-28 21:28:27.802 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 21:28:27.805 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 21:28:27.861 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 60.8381 ms
2026-01-28 21:28:27.923 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 21:28:27.926 +02:00 [INF] שולף את כל החבילות.
2026-01-28 21:28:27.935 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 21:28:27.950 +02:00 [INF] HTTP GET /api/Packages responded 200 in 33.9155 ms
2026-01-28 21:28:27.960 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 44.4031 ms
2026-01-28 21:28:33.495 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 21:28:33.499 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 21:28:33.512 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 17.7302 ms
2026-01-28 21:28:33.664 +02:00 [INF] שולף את כל החבילות.
2026-01-28 21:28:33.666 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 21:28:33.674 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 21:28:33.678 +02:00 [INF] HTTP GET /api/Packages responded 200 in 14.4692 ms
2026-01-28 21:28:33.696 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 31.2139 ms
2026-01-28 21:37:39.177 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 21:37:39.185 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 21:37:39.353 +02:00 [INF] שולף את כל החבילות.
2026-01-28 21:37:39.608 +02:00 [INF] HTTP GET /api/Packages responded 200 in 257.6744 ms
2026-01-28 21:37:39.658 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 481.8517 ms
2026-01-28 21:38:17.359 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 21:38:17.363 +02:00 [INF] שולף את כל החבילות.
2026-01-28 21:38:17.376 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 21:38:17.397 +02:00 [INF] HTTP GET /api/Packages responded 200 in 37.8361 ms
2026-01-28 21:38:17.426 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 68.3661 ms
2026-01-28 21:38:19.178 +02:00 [INF] מעדכן/מוסיף מתנה 0 להזמנה 0 בכמות 0.
2026-01-28 21:38:19.219 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'ChineseAuctionAPI.Data.SaleContextDB'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:22021ff6-e249-4bea-8be3-035ba0387e05
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:22021ff6-e249-4bea-8be3-035ba0387e05
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-28 21:38:19.541 +02:00 [ERR] שגיאה בעת עדכון מתנה 0 בהזמנה 0.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:22021ff6-e249-4bea-8be3-035ba0387e05
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ChineseAuctionAPI.Repositories.OrderRepo.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 IdGift, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Repositories\OrderRepo.cs:line 99
   at ChineseAuctionAPI.Services.OrderService.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 giftId, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\OrderService.cs:line 27
2026-01-28 21:38:19.807 +02:00 [ERR] HTTP POST /api/Orders/add-gift responded 500 in 629.9704 ms
2026-01-28 21:38:25.513 +02:00 [INF] מעדכן/מוסיף מתנה 0 להזמנה 0 בכמות 0.
2026-01-28 21:38:25.582 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'ChineseAuctionAPI.Data.SaleContextDB'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:22021ff6-e249-4bea-8be3-035ba0387e05
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:22021ff6-e249-4bea-8be3-035ba0387e05
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-28 21:38:25.843 +02:00 [ERR] שגיאה בעת עדכון מתנה 0 בהזמנה 0.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:22021ff6-e249-4bea-8be3-035ba0387e05
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ChineseAuctionAPI.Repositories.OrderRepo.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 IdGift, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Repositories\OrderRepo.cs:line 99
   at ChineseAuctionAPI.Services.OrderService.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 giftId, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\OrderService.cs:line 27
2026-01-28 21:38:26.083 +02:00 [ERR] HTTP POST /api/Orders/add-gift responded 500 in 571.0667 ms
2026-01-28 21:38:53.708 +02:00 [INF] Login attempt for email: yy@gmail.com
2026-01-28 21:38:54.033 +02:00 [INF] ניסיון התחברות עבור אימייל: yy@gmail.com
2026-01-28 21:38:54.883 +02:00 [WRN] סיסמה שגויה עבור: yy@gmail.com
2026-01-28 21:38:54.889 +02:00 [WRN] Invalid login attempt for email: yy@gmail.com
2026-01-28 21:38:54.916 +02:00 [INF] HTTP POST /api/User/login responded 401 in 1333.4884 ms
2026-01-28 21:40:10.120 +02:00 [INF] Attempting to register user with email: 111222333@gmail.com
2026-01-28 21:40:10.127 +02:00 [INF] ניסיון רישום משתמש חדש: 111222333@gmail.com
2026-01-28 21:40:10.917 +02:00 [INF] משתמש נרשם בהצלחה: 13
2026-01-28 21:40:10.924 +02:00 [INF] HTTP POST /api/User/register responded 200 in 837.5581 ms
2026-01-28 21:40:22.344 +02:00 [INF] שולף את כל החבילות.
2026-01-28 21:40:22.364 +02:00 [INF] HTTP GET /api/Packages responded 200 in 20.6675 ms
2026-01-28 21:40:27.739 +02:00 [INF] מעדכן/מוסיף מתנה 0 להזמנה 0 בכמות 0.
2026-01-28 21:40:27.800 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'ChineseAuctionAPI.Data.SaleContextDB'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:22021ff6-e249-4bea-8be3-035ba0387e05
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:22021ff6-e249-4bea-8be3-035ba0387e05
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-28 21:40:28.099 +02:00 [ERR] שגיאה בעת עדכון מתנה 0 בהזמנה 0.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:22021ff6-e249-4bea-8be3-035ba0387e05
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ChineseAuctionAPI.Repositories.OrderRepo.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 IdGift, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Repositories\OrderRepo.cs:line 99
   at ChineseAuctionAPI.Services.OrderService.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 giftId, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\OrderService.cs:line 27
2026-01-28 21:40:28.361 +02:00 [ERR] HTTP POST /api/Orders/add-gift responded 500 in 622.3082 ms
2026-01-28 21:40:31.563 +02:00 [INF] מעדכן/מוסיף מתנה 0 להזמנה 0 בכמות 0.
2026-01-28 21:40:31.587 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'ChineseAuctionAPI.Data.SaleContextDB'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:0a987d9a-7d01-452d-a18d-097bdff764fe
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:0a987d9a-7d01-452d-a18d-097bdff764fe
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-28 21:40:31.810 +02:00 [ERR] שגיאה בעת עדכון מתנה 0 בהזמנה 0.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:0a987d9a-7d01-452d-a18d-097bdff764fe
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ChineseAuctionAPI.Repositories.OrderRepo.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 IdGift, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Repositories\OrderRepo.cs:line 99
   at ChineseAuctionAPI.Services.OrderService.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 giftId, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\OrderService.cs:line 27
2026-01-28 21:40:32.055 +02:00 [ERR] HTTP POST /api/Orders/add-gift responded 500 in 492.8564 ms
2026-01-28 21:40:47.726 +02:00 [INF] מעדכן/מוסיף מתנה 0 להזמנה 0 בכמות 0.
2026-01-28 21:40:47.787 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'ChineseAuctionAPI.Data.SaleContextDB'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:0a987d9a-7d01-452d-a18d-097bdff764fe
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:0a987d9a-7d01-452d-a18d-097bdff764fe
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-28 21:40:48.026 +02:00 [ERR] שגיאה בעת עדכון מתנה 0 בהזמנה 0.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:0a987d9a-7d01-452d-a18d-097bdff764fe
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ChineseAuctionAPI.Repositories.OrderRepo.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 IdGift, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Repositories\OrderRepo.cs:line 99
   at ChineseAuctionAPI.Services.OrderService.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 giftId, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\OrderService.cs:line 27
2026-01-28 21:40:48.273 +02:00 [ERR] HTTP POST /api/Orders/add-gift responded 500 in 550.0657 ms
2026-01-28 21:44:22.013 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 21:44:22.035 +02:00 [INF] שולף את כל החבילות.
2026-01-28 21:44:22.038 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 21:44:22.090 +02:00 [INF] HTTP GET /api/Packages responded 200 in 55.7175 ms
2026-01-28 21:44:22.145 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 136.0116 ms
2026-01-28 21:44:24.214 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 21:44:24.216 +02:00 [INF] שולף את כל החבילות.
2026-01-28 21:44:24.219 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 21:44:24.234 +02:00 [INF] HTTP GET /api/Packages responded 200 in 18.5722 ms
2026-01-28 21:44:24.243 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 28.8947 ms
2026-01-28 21:44:52.694 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 21:44:52.700 +02:00 [INF] שולף את כל החבילות.
2026-01-28 21:44:52.703 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 21:44:52.728 +02:00 [INF] HTTP GET /api/Packages responded 200 in 30.0090 ms
2026-01-28 21:44:52.755 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 62.3497 ms
2026-01-28 21:45:07.878 +02:00 [INF] Login attempt for email: 111222333@gmail.com
2026-01-28 21:45:07.884 +02:00 [INF] ניסיון התחברות עבור אימייל: 111222333@gmail.com
2026-01-28 21:45:08.413 +02:00 [INF] HTTP POST /api/User/login responded 200 in 541.0919 ms
2026-01-28 21:45:14.142 +02:00 [INF] שולף את כל החבילות.
2026-01-28 21:45:14.156 +02:00 [INF] HTTP GET /api/Packages responded 200 in 14.0428 ms
2026-01-28 21:47:05.134 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 21:47:05.138 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 21:47:05.191 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 57.5445 ms
2026-01-28 21:47:42.953 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 21:47:42.958 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 21:47:42.977 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 29.8221 ms
2026-01-28 21:47:56.230 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 21:47:56.233 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 21:47:56.294 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 65.4666 ms
2026-01-28 21:48:01.136 +02:00 [INF] שולף את כל החבילות.
2026-01-28 21:48:01.152 +02:00 [INF] HTTP GET /api/Packages responded 200 in 16.9333 ms
2026-01-28 21:48:17.160 +02:00 [INF] Login attempt for email: 111222333@gmail.com
2026-01-28 21:48:17.172 +02:00 [INF] ניסיון התחברות עבור אימייל: 111222333@gmail.com
2026-01-28 21:48:17.705 +02:00 [INF] HTTP POST /api/User/login responded 200 in 546.6167 ms
2026-01-28 21:48:22.544 +02:00 [INF] Login attempt for email: 111222333@gmail.com
2026-01-28 21:48:22.548 +02:00 [INF] ניסיון התחברות עבור אימייל: 111222333@gmail.com
2026-01-28 21:48:23.084 +02:00 [INF] HTTP POST /api/User/login responded 200 in 540.9924 ms
2026-01-28 21:48:36.899 +02:00 [INF] שולף את כל החבילות.
2026-01-28 21:48:36.918 +02:00 [INF] HTTP GET /api/Packages responded 200 in 18.8994 ms
2026-01-28 21:50:08.041 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 21:50:08.045 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 21:50:08.093 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 64.9522 ms
2026-01-28 21:50:17.469 +02:00 [INF] Fetching draft order for user ID: 1
2026-01-28 21:50:17.473 +02:00 [INF] מחפש הזמנה במצב טיוטה (Draft) עבור משתמש 1.
2026-01-28 21:50:17.489 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 200 in 20.9170 ms
2026-01-28 21:50:20.133 +02:00 [INF] שולף את כל החבילות.
2026-01-28 21:50:20.163 +02:00 [INF] HTTP GET /api/Packages responded 200 in 30.2244 ms
2026-01-28 21:50:21.826 +02:00 [INF] מעדכן/מוסיף מתנה 0 להזמנה 0 בכמות 0.
2026-01-28 21:50:21.868 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'ChineseAuctionAPI.Data.SaleContextDB'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d4fcb1fb-b979-4e81-a2f7-e4c0a7559623
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d4fcb1fb-b979-4e81-a2f7-e4c0a7559623
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-28 21:50:22.114 +02:00 [ERR] שגיאה בעת עדכון מתנה 0 בהזמנה 0.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d4fcb1fb-b979-4e81-a2f7-e4c0a7559623
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ChineseAuctionAPI.Repositories.OrderRepo.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 IdGift, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Repositories\OrderRepo.cs:line 99
   at ChineseAuctionAPI.Services.OrderService.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 giftId, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\OrderService.cs:line 27
2026-01-28 21:50:22.388 +02:00 [ERR] HTTP POST /api/Orders/add-gift responded 500 in 563.0777 ms
2026-01-28 21:50:37.468 +02:00 [INF] Login attempt for email: 111222333@gmail.com
2026-01-28 21:50:37.478 +02:00 [INF] ניסיון התחברות עבור אימייל: 111222333@gmail.com
2026-01-28 21:50:38.092 +02:00 [INF] HTTP POST /api/User/login responded 200 in 626.5707 ms
2026-01-28 21:50:40.628 +02:00 [INF] שולף את כל החבילות.
2026-01-28 21:50:40.645 +02:00 [INF] HTTP GET /api/Packages responded 200 in 16.8588 ms
2026-01-28 21:50:43.917 +02:00 [INF] מעדכן/מוסיף מתנה 0 להזמנה 0 בכמות 0.
2026-01-28 21:50:43.941 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'ChineseAuctionAPI.Data.SaleContextDB'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d4fcb1fb-b979-4e81-a2f7-e4c0a7559623
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d4fcb1fb-b979-4e81-a2f7-e4c0a7559623
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-28 21:50:44.204 +02:00 [ERR] שגיאה בעת עדכון מתנה 0 בהזמנה 0.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrdersOrders_Users_IdUser". The conflict occurred in database "0533155961_SalesAPI", table "dbo.Users", column 'IdUser'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d4fcb1fb-b979-4e81-a2f7-e4c0a7559623
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ChineseAuctionAPI.Repositories.OrderRepo.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 IdGift, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Repositories\OrderRepo.cs:line 99
   at ChineseAuctionAPI.Services.OrderService.AddOrUpdateGiftInOrderAsync(Int32 userId, Int32 giftId, Int32 amount) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\OrderService.cs:line 27
2026-01-28 21:50:44.430 +02:00 [ERR] HTTP POST /api/Orders/add-gift responded 500 in 513.8283 ms
2026-01-28 21:56:59.423 +02:00 [INF] Starting web host - Monitoring all requests
2026-01-28 21:57:03.450 +02:00 [INF] HTTP GET /swagger/index.html responded 200 in 324.9571 ms
2026-01-28 21:57:03.864 +02:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 81.7366 ms
2026-01-28 21:57:27.647 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 404 in 240.0000 ms
2026-01-28 21:57:28.206 +02:00 [INF] שולף את כל החבילות.
2026-01-28 21:57:33.315 +02:00 [INF] HTTP GET /api/Packages responded 200 in 5904.7065 ms
2026-01-28 21:58:11.021 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 404 in 9.0101 ms
2026-01-28 21:58:11.101 +02:00 [INF] שולף את כל החבילות.
2026-01-28 21:58:11.351 +02:00 [INF] HTTP GET /api/Packages responded 200 in 255.2271 ms
2026-01-28 21:59:50.243 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 404 in 0.5820 ms
2026-01-28 22:00:29.569 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 404 in 0.4840 ms
2026-01-28 22:01:19.009 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 404 in 0.4011 ms
2026-01-28 22:01:33.930 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 404 in 0.3419 ms
2026-01-28 22:01:35.250 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:01:35.325 +02:00 [INF] HTTP GET /api/Packages responded 200 in 90.6691 ms
2026-01-28 22:01:48.663 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 404 in 0.6433 ms
2026-01-28 22:01:48.707 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:01:48.721 +02:00 [INF] HTTP GET /api/Packages responded 200 in 14.2169 ms
2026-01-28 22:01:58.543 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:01:58.567 +02:00 [INF] HTTP GET /api/Packages responded 200 in 25.1021 ms
2026-01-28 22:02:00.340 +02:00 [INF] Updating package 1 for user 13 with amount 1
2026-01-28 22:02:02.139 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 1901.7671 ms
2026-01-28 22:02:02.381 +02:00 [INF] Updating package 1 for user 13 with amount 1
2026-01-28 22:02:02.537 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 166.3156 ms
2026-01-28 22:02:03.382 +02:00 [INF] Updating package 1 for user 13 with amount 2
2026-01-28 22:02:03.550 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 176.8382 ms
2026-01-28 22:02:03.897 +02:00 [INF] Updating package 1 for user 13 with amount 3
2026-01-28 22:02:03.992 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 96.7596 ms
2026-01-28 22:02:04.773 +02:00 [INF] Updating package 1 for user 13 with amount 4
2026-01-28 22:02:04.865 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 93.9245 ms
2026-01-28 22:02:05.032 +02:00 [INF] Updating package 1 for user 13 with amount 5
2026-01-28 22:02:05.099 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 68.8813 ms
2026-01-28 22:02:07.283 +02:00 [INF] Updating package 1 for user 13 with amount 4
2026-01-28 22:02:07.320 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 38.8839 ms
2026-01-28 22:02:07.977 +02:00 [INF] Updating package 1 for user 13 with amount 3
2026-01-28 22:02:08.008 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 31.7872 ms
2026-01-28 22:02:08.245 +02:00 [INF] Updating package 1 for user 13 with amount 2
2026-01-28 22:02:08.275 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 31.3445 ms
2026-01-28 22:02:08.639 +02:00 [INF] Updating package 1 for user 13 with amount 1
2026-01-28 22:02:08.669 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 32.0830 ms
2026-01-28 22:02:15.171 +02:00 [INF] Updating package 2 for user 13 with amount 1
2026-01-28 22:02:15.244 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 76.1558 ms
2026-01-28 22:02:16.906 +02:00 [INF] Updating package 2 for user 13 with amount 2
2026-01-28 22:02:16.983 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 79.2391 ms
2026-01-28 22:02:28.274 +02:00 [INF] Updating package 3 for user 13 with amount 1
2026-01-28 22:02:28.321 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 48.2423 ms
2026-01-28 22:02:29.204 +02:00 [INF] Updating package 3 for user 13 with amount 2
2026-01-28 22:02:29.256 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 53.6564 ms
2026-01-28 22:02:31.036 +02:00 [INF] Updating package 3 for user 13 with amount 3
2026-01-28 22:02:31.114 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 79.6222 ms
2026-01-28 22:02:31.290 +02:00 [INF] Updating package 3 for user 13 with amount 3
2026-01-28 22:02:31.354 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 65.8794 ms
2026-01-28 22:02:31.426 +02:00 [INF] Updating package 3 for user 13 with amount 4
2026-01-28 22:02:31.458 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 32.9293 ms
2026-01-28 22:02:32.792 +02:00 [INF] Updating package 3 for user 13 with amount 5
2026-01-28 22:02:32.868 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 77.9900 ms
2026-01-28 22:02:33.642 +02:00 [INF] Updating package 3 for user 13 with amount 6
2026-01-28 22:02:33.674 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 32.2630 ms
2026-01-28 22:02:33.884 +02:00 [INF] Updating package 3 for user 13 with amount 6
2026-01-28 22:02:33.925 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 41.9914 ms
2026-01-28 22:03:58.049 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 404 in 4.3537 ms
2026-01-28 22:03:58.175 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:03:58.216 +02:00 [INF] HTTP GET /api/Packages responded 200 in 42.6934 ms
2026-01-28 22:04:29.025 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 404 in 0.3394 ms
2026-01-28 22:04:29.141 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:04:29.178 +02:00 [INF] HTTP GET /api/Packages responded 200 in 37.4652 ms
2026-01-28 22:04:50.184 +02:00 [INF] HTTP GET /api/Orders/draft/1 responded 404 in 0.2272 ms
2026-01-28 22:04:50.320 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:04:50.338 +02:00 [INF] HTTP GET /api/Packages responded 200 in 19.6775 ms
2026-01-28 22:26:21.630 +02:00 [INF] HTTP GET /api/Orders/draft/13 responded 404 in 6.5752 ms
2026-01-28 22:26:36.776 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:26:36.950 +02:00 [INF] HTTP GET /api/Packages responded 200 in 174.8111 ms
2026-01-28 22:28:18.473 +02:00 [INF] HTTP POST /api/Orders/add-package responded 404 in 4.3186 ms
2026-01-28 22:29:06.788 +02:00 [INF] HTTP GET /api/Orders/draft/13 responded 404 in 0.2477 ms
2026-01-28 22:29:06.848 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:29:06.870 +02:00 [INF] HTTP GET /api/Packages responded 200 in 22.6658 ms
2026-01-28 22:31:38.972 +02:00 [INF] HTTP POST /api/Orders/add-package responded 404 in 0.1921 ms
2026-01-28 22:32:26.664 +02:00 [INF] HTTP GET /api/Orders/draft/13 responded 404 in 0.3079 ms
2026-01-28 22:32:26.743 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:32:26.765 +02:00 [INF] HTTP GET /api/Packages responded 200 in 22.4978 ms
2026-01-28 22:32:28.386 +02:00 [INF] HTTP POST /api/Orders/add-package responded 404 in 0.2310 ms
2026-01-28 22:32:41.034 +02:00 [INF] Login attempt for email: 111222333@gmail.com
2026-01-28 22:32:41.060 +02:00 [INF] ניסיון התחברות עבור אימייל: 111222333@gmail.com
2026-01-28 22:32:41.487 +02:00 [INF] HTTP POST /api/User/login responded 200 in 477.5018 ms
2026-01-28 22:32:43.723 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:32:43.764 +02:00 [INF] HTTP GET /api/Packages responded 200 in 41.1430 ms
2026-01-28 22:32:46.205 +02:00 [INF] HTTP POST /api/Orders/add-package responded 404 in 0.2076 ms
2026-01-28 22:34:01.433 +02:00 [INF] HTTP GET /api/Orders/draft/13 responded 404 in 0.1742 ms
2026-01-28 22:34:01.504 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:34:01.567 +02:00 [INF] HTTP GET /api/Packages responded 200 in 67.9502 ms
2026-01-28 22:34:09.058 +02:00 [INF] HTTP GET /api/Orders/draft/13 responded 404 in 0.1315 ms
2026-01-28 22:34:09.101 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:34:09.106 +02:00 [INF] HTTP GET /api/Packages responded 200 in 5.5107 ms
2026-01-28 22:34:12.816 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:34:12.819 +02:00 [INF] HTTP GET /api/Orders/draft/13 responded 404 in 0.3799 ms
2026-01-28 22:34:12.825 +02:00 [INF] HTTP GET /api/Packages responded 200 in 8.7354 ms
2026-01-28 22:34:14.759 +02:00 [INF] HTTP POST /api/Orders/add-package responded 404 in 0.1622 ms
2026-01-28 22:36:41.270 +02:00 [INF] Starting web host - Monitoring all requests
2026-01-28 22:36:43.594 +02:00 [INF] HTTP GET /swagger/index.html responded 200 in 133.4851 ms
2026-01-28 22:36:43.762 +02:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 46.7107 ms
2026-01-28 22:36:55.310 +02:00 [INF] HTTP GET /api/Orders/draft/13 responded 404 in 88.5507 ms
2026-01-28 22:37:19.153 +02:00 [INF] HTTP GET /api/Orders/draft/13 responded 404 in 3.2448 ms
2026-01-28 22:37:19.383 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:37:21.634 +02:00 [INF] HTTP GET /api/Packages responded 200 in 2442.3742 ms
2026-01-28 22:37:28.491 +02:00 [INF] HTTP POST /api/Orders/add-package responded 404 in 3.0513 ms
2026-01-28 22:37:31.520 +02:00 [INF] HTTP GET /api/Orders/draft/13 responded 404 in 0.7984 ms
2026-01-28 22:37:31.539 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:37:31.636 +02:00 [INF] HTTP GET /api/Packages responded 200 in 102.5105 ms
2026-01-28 22:37:42.402 +02:00 [INF] HTTP POST /api/Orders/add-package responded 404 in 0.5483 ms
2026-01-28 22:38:01.043 +02:00 [INF] HTTP GET /api/Orders/draft/13 responded 404 in 0.1958 ms
2026-01-28 22:38:01.112 +02:00 [INF] HTTP GET /api/Orders/draft/13 responded 404 in 0.1849 ms
2026-01-28 22:38:01.155 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:38:01.180 +02:00 [INF] HTTP GET /api/Packages responded 200 in 31.1087 ms
2026-01-28 22:38:03.067 +02:00 [INF] HTTP GET /api/Orders/draft/13 responded 404 in 0.2030 ms
2026-01-28 22:38:03.129 +02:00 [INF] HTTP GET /api/Orders/draft/13 responded 404 in 0.1872 ms
2026-01-28 22:38:03.175 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:38:03.182 +02:00 [INF] HTTP GET /api/Packages responded 200 in 7.7146 ms
2026-01-28 22:38:36.590 +02:00 [INF] Starting web host - Monitoring all requests
2026-01-28 22:38:37.776 +02:00 [INF] HTTP GET /swagger/index.html responded 200 in 88.1770 ms
2026-01-28 22:38:37.912 +02:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 16.1468 ms
2026-01-28 22:39:13.460 +02:00 [INF] HTTP GET /api/Orders/draft/13 responded 404 in 100.5564 ms
2026-01-28 22:39:13.633 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:39:15.460 +02:00 [INF] HTTP GET /api/Packages responded 200 in 2035.2103 ms
2026-01-28 22:39:21.098 +02:00 [INF] HTTP GET /api/Orders/draft/13 responded 404 in 4.1844 ms
2026-01-28 22:39:21.137 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:39:21.244 +02:00 [INF] HTTP GET /api/Packages responded 200 in 109.7667 ms
2026-01-28 22:39:24.126 +02:00 [INF] HTTP GET /api/Orders/draft/13 responded 404 in 0.3309 ms
2026-01-28 22:39:24.174 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:39:24.201 +02:00 [INF] HTTP GET /api/Packages responded 200 in 32.4981 ms
2026-01-28 22:39:37.008 +02:00 [INF] HTTP GET /api/Orders/draft/13 responded 404 in 0.2867 ms
2026-01-28 22:39:37.014 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:39:37.025 +02:00 [INF] HTTP GET /api/Packages responded 200 in 10.9353 ms
2026-01-28 22:39:38.827 +02:00 [INF] HTTP POST /api/Orders/update-package responded 415 in 91.3105 ms
2026-01-28 22:39:50.092 +02:00 [INF] HTTP GET /api/Orders/draft/13 responded 404 in 0.2333 ms
2026-01-28 22:39:50.129 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:39:50.136 +02:00 [INF] HTTP GET /api/Packages responded 200 in 7.6891 ms
2026-01-28 22:40:53.326 +02:00 [INF] HTTP GET /api/Orders/draft/13 responded 404 in 0.4135 ms
2026-01-28 22:40:53.335 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:40:53.371 +02:00 [INF] HTTP GET /api/Packages responded 200 in 36.2135 ms
2026-01-28 22:41:00.377 +02:00 [INF] HTTP GET /api/Orders/draft/13 responded 404 in 0.2990 ms
2026-01-28 22:41:00.418 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:41:00.428 +02:00 [INF] HTTP GET /api/Packages responded 200 in 11.1586 ms
2026-01-28 22:44:13.268 +02:00 [INF] Fetching user with orders for ID: 13
2026-01-28 22:44:13.272 +02:00 [INF] שולף משתמש 13 עם הזמנות.
2026-01-28 22:44:13.304 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:44:13.360 +02:00 [INF] HTTP GET /api/Packages responded 200 in 58.5667 ms
2026-01-28 22:44:13.772 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 13
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 22:44:13.850 +02:00 [WRN] User with ID: 13 not found for orders request
2026-01-28 22:44:13.854 +02:00 [INF] HTTP GET /api/User/13/orders responded 404 in 598.1020 ms
2026-01-28 22:44:18.940 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:44:18.942 +02:00 [INF] Fetching user with orders for ID: 13
2026-01-28 22:44:18.944 +02:00 [INF] שולף משתמש 13 עם הזמנות.
2026-01-28 22:44:18.951 +02:00 [INF] HTTP GET /api/Packages responded 200 in 11.4215 ms
2026-01-28 22:44:19.002 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 13
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 22:44:19.007 +02:00 [WRN] User with ID: 13 not found for orders request
2026-01-28 22:44:19.010 +02:00 [INF] HTTP GET /api/User/13/orders responded 404 in 70.2576 ms
2026-01-28 22:44:21.132 +02:00 [INF] Updating package 1 for user 13 with amount 1
2026-01-28 22:44:21.466 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 382.1924 ms
2026-01-28 22:44:22.457 +02:00 [INF] Updating package 1 for user 13 with amount 2
2026-01-28 22:44:22.486 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 34.1085 ms
2026-01-28 22:44:22.880 +02:00 [INF] Updating package 1 for user 13 with amount 3
2026-01-28 22:44:22.908 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 29.5267 ms
2026-01-28 22:44:23.130 +02:00 [INF] Updating package 1 for user 13 with amount 4
2026-01-28 22:44:23.179 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 49.9951 ms
2026-01-28 22:44:24.390 +02:00 [INF] Updating package 1 for user 13 with amount 3
2026-01-28 22:44:24.438 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 49.2662 ms
2026-01-28 22:44:24.919 +02:00 [INF] Updating package 1 for user 13 with amount 2
2026-01-28 22:44:24.951 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 33.7369 ms
2026-01-28 22:44:25.151 +02:00 [INF] Updating package 1 for user 13 with amount 2
2026-01-28 22:44:25.185 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 35.8181 ms
2026-01-28 22:44:25.189 +02:00 [INF] Updating package 1 for user 13 with amount 1
2026-01-28 22:44:25.217 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 30.4808 ms
2026-01-28 22:44:26.167 +02:00 [INF] Updating package 1 for user 13 with amount 2
2026-01-28 22:44:26.213 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 46.9085 ms
2026-01-28 22:44:26.676 +02:00 [INF] Updating package 1 for user 13 with amount 3
2026-01-28 22:44:26.705 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 30.8840 ms
2026-01-28 22:44:26.896 +02:00 [INF] Updating package 1 for user 13 with amount 3
2026-01-28 22:44:26.943 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 48.1972 ms
2026-01-28 22:44:26.946 +02:00 [INF] Updating package 1 for user 13 with amount 4
2026-01-28 22:44:26.974 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 29.5494 ms
2026-01-28 22:44:27.662 +02:00 [INF] Updating package 1 for user 13 with amount 5
2026-01-28 22:44:27.704 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 43.4949 ms
2026-01-28 22:44:28.213 +02:00 [INF] Updating package 1 for user 13 with amount 6
2026-01-28 22:44:28.250 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 38.1919 ms
2026-01-28 22:44:29.830 +02:00 [INF] Updating package 1 for user 13 with amount 5
2026-01-28 22:44:29.872 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 42.6716 ms
2026-01-28 22:44:30.405 +02:00 [INF] Updating package 1 for user 13 with amount 4
2026-01-28 22:44:30.449 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 44.8949 ms
2026-01-28 22:44:30.578 +02:00 [INF] Updating package 1 for user 13 with amount 4
2026-01-28 22:44:30.604 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 26.5440 ms
2026-01-28 22:44:30.661 +02:00 [INF] Updating package 1 for user 13 with amount 4
2026-01-28 22:44:30.684 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 23.5810 ms
2026-01-28 22:44:30.761 +02:00 [INF] Updating package 1 for user 13 with amount 3
2026-01-28 22:44:30.772 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 11.2499 ms
2026-01-28 22:44:30.965 +02:00 [INF] Updating package 1 for user 13 with amount 2
2026-01-28 22:44:30.977 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 12.0719 ms
2026-01-28 22:44:31.218 +02:00 [INF] Updating package 1 for user 13 with amount 1
2026-01-28 22:44:31.257 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 40.2057 ms
2026-01-28 22:44:33.559 +02:00 [INF] Updating package 2 for user 13 with amount 1
2026-01-28 22:44:33.601 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 43.5161 ms
2026-01-28 22:44:33.696 +02:00 [INF] Updating package 2 for user 13 with amount 1
2026-01-28 22:44:33.721 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 25.4644 ms
2026-01-28 22:44:33.821 +02:00 [INF] Updating package 2 for user 13 with amount 1
2026-01-28 22:44:33.842 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 21.7877 ms
2026-01-28 22:44:33.873 +02:00 [INF] Updating package 2 for user 13 with amount 2
2026-01-28 22:44:33.902 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 34.0035 ms
2026-01-28 22:44:37.058 +02:00 [INF] Fetching user with orders for ID: 13
2026-01-28 22:44:37.059 +02:00 [INF] שולף משתמש 13 עם הזמנות.
2026-01-28 22:44:37.109 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 13
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 22:44:37.114 +02:00 [WRN] User with ID: 13 not found for orders request
2026-01-28 22:44:37.115 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:44:37.116 +02:00 [INF] HTTP GET /api/User/13/orders responded 404 in 60.8260 ms
2026-01-28 22:44:37.122 +02:00 [INF] HTTP GET /api/Packages responded 200 in 7.0136 ms
2026-01-28 22:46:53.609 +02:00 [INF] Fetching user with orders for ID: 13
2026-01-28 22:46:53.611 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:46:53.613 +02:00 [INF] שולף משתמש 13 עם הזמנות.
2026-01-28 22:46:53.641 +02:00 [INF] HTTP GET /api/Packages responded 200 in 32.4592 ms
2026-01-28 22:46:53.672 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 13
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 22:46:53.676 +02:00 [WRN] User with ID: 13 not found for orders request
2026-01-28 22:46:53.678 +02:00 [INF] HTTP GET /api/User/13/orders responded 404 in 74.2776 ms
2026-01-28 22:48:16.702 +02:00 [INF] Updating package 2 for user 13 with amount 1
2026-01-28 22:48:16.800 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 107.3063 ms
2026-01-28 22:48:18.205 +02:00 [INF] Updating package 2 for user 13 with amount 2
2026-01-28 22:48:18.243 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 39.3596 ms
2026-01-28 22:48:18.845 +02:00 [INF] Updating package 2 for user 13 with amount 3
2026-01-28 22:48:18.872 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 28.2868 ms
2026-01-28 22:48:22.410 +02:00 [INF] Fetching user with orders for ID: 13
2026-01-28 22:48:22.412 +02:00 [INF] שולף משתמש 13 עם הזמנות.
2026-01-28 22:48:22.487 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 13
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 22:48:22.495 +02:00 [WRN] User with ID: 13 not found for orders request
2026-01-28 22:48:22.498 +02:00 [INF] HTTP GET /api/User/13/orders responded 404 in 88.4196 ms
2026-01-28 22:48:22.618 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:48:22.635 +02:00 [INF] HTTP GET /api/Packages responded 200 in 16.8975 ms
2026-01-28 22:48:27.677 +02:00 [INF] Updating package 3 for user 13 with amount 1
2026-01-28 22:48:27.703 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 26.8255 ms
2026-01-28 22:48:27.913 +02:00 [INF] Updating package 3 for user 13 with amount 2
2026-01-28 22:48:27.954 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 42.2777 ms
2026-01-28 22:48:29.318 +02:00 [INF] Updating package 3 for user 13 with amount 3
2026-01-28 22:48:29.359 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 42.2287 ms
2026-01-28 22:48:29.941 +02:00 [INF] Updating package 3 for user 13 with amount 4
2026-01-28 22:48:29.968 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 27.8284 ms
2026-01-28 22:48:32.023 +02:00 [INF] Fetching user with orders for ID: 13
2026-01-28 22:48:32.025 +02:00 [INF] שולף משתמש 13 עם הזמנות.
2026-01-28 22:48:32.069 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 13
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 22:48:32.076 +02:00 [WRN] User with ID: 13 not found for orders request
2026-01-28 22:48:32.078 +02:00 [INF] שולף את כל החבילות.
2026-01-28 22:48:32.079 +02:00 [INF] HTTP GET /api/User/13/orders responded 404 in 56.6191 ms
2026-01-28 22:48:32.089 +02:00 [INF] HTTP GET /api/Packages responded 200 in 11.1331 ms
2026-01-28 22:49:34.900 +02:00 [INF] Updating package 1 for user 13 with amount 1
2026-01-28 22:49:34.966 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 72.5294 ms
2026-01-28 22:49:38.862 +02:00 [INF] Updating package 2 for user 13 with amount 1
2026-01-28 22:49:38.886 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 24.4530 ms
2026-01-28 22:49:39.238 +02:00 [INF] Updating package 2 for user 13 with amount 2
2026-01-28 22:49:39.275 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 37.6310 ms
2026-01-28 22:51:42.869 +02:00 [INF] Login attempt for email: 111222333@gmail.com
2026-01-28 22:51:42.891 +02:00 [INF] ניסיון התחברות עבור אימייל: 111222333@gmail.com
2026-01-28 22:51:43.357 +02:00 [INF] HTTP POST /api/User/login responded 200 in 514.0491 ms
2026-01-28 22:52:59.540 +02:00 [INF] HTTP GET /api/User responded 403 in 131.5373 ms
2026-01-28 22:53:34.895 +02:00 [INF] Updating package 1 for user 1 with amount 2
2026-01-28 22:53:35.238 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 355.1915 ms
2026-01-28 23:01:24.326 +02:00 [INF] Fetching user with orders for ID: 13
2026-01-28 23:01:24.327 +02:00 [INF] שולף משתמש 13 עם הזמנות.
2026-01-28 23:01:24.403 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:01:24.448 +02:00 [INF] HTTP GET /api/Packages responded 200 in 45.5112 ms
2026-01-28 23:01:24.476 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 13
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:01:24.487 +02:00 [WRN] User with ID: 13 not found for orders request
2026-01-28 23:01:24.489 +02:00 [INF] HTTP GET /api/User/13/orders responded 404 in 164.7870 ms
2026-01-28 23:01:26.508 +02:00 [INF] Fetching user with orders for ID: 13
2026-01-28 23:01:26.510 +02:00 [INF] שולף משתמש 13 עם הזמנות.
2026-01-28 23:01:26.582 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 13
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:01:26.600 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:01:26.601 +02:00 [WRN] User with ID: 13 not found for orders request
2026-01-28 23:01:26.608 +02:00 [INF] HTTP GET /api/User/13/orders responded 404 in 100.5918 ms
2026-01-28 23:01:26.608 +02:00 [INF] HTTP GET /api/Packages responded 200 in 8.2397 ms
2026-01-28 23:01:37.274 +02:00 [INF] Fetching user with orders for ID: 13
2026-01-28 23:01:37.278 +02:00 [INF] שולף משתמש 13 עם הזמנות.
2026-01-28 23:01:37.310 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 13
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:01:37.315 +02:00 [WRN] User with ID: 13 not found for orders request
2026-01-28 23:01:37.318 +02:00 [INF] HTTP GET /api/User/13/orders responded 404 in 44.6857 ms
2026-01-28 23:01:37.319 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:01:37.326 +02:00 [INF] HTTP GET /api/Packages responded 200 in 7.8395 ms
2026-01-28 23:01:58.279 +02:00 [INF] Fetching user with orders for ID: 13
2026-01-28 23:01:58.280 +02:00 [INF] שולף משתמש 13 עם הזמנות.
2026-01-28 23:01:58.311 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 13
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:01:58.317 +02:00 [WRN] User with ID: 13 not found for orders request
2026-01-28 23:01:58.319 +02:00 [INF] HTTP GET /api/User/13/orders responded 404 in 40.7805 ms
2026-01-28 23:01:58.332 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:01:58.339 +02:00 [INF] HTTP GET /api/Packages responded 200 in 6.7081 ms
2026-01-28 23:02:15.543 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:02:15.544 +02:00 [INF] Fetching user with orders for ID: 13
2026-01-28 23:02:15.547 +02:00 [INF] שולף משתמש 13 עם הזמנות.
2026-01-28 23:02:15.551 +02:00 [INF] HTTP GET /api/Packages responded 200 in 7.5435 ms
2026-01-28 23:02:15.590 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 13
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:02:15.596 +02:00 [WRN] User with ID: 13 not found for orders request
2026-01-28 23:02:15.597 +02:00 [INF] HTTP GET /api/User/13/orders responded 404 in 53.4260 ms
2026-01-28 23:02:17.486 +02:00 [INF] Fetching user with orders for ID: 13
2026-01-28 23:02:17.489 +02:00 [INF] שולף משתמש 13 עם הזמנות.
2026-01-28 23:02:17.490 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:02:17.532 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 13
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:02:17.535 +02:00 [INF] HTTP GET /api/Packages responded 200 in 45.9140 ms
2026-01-28 23:02:17.538 +02:00 [WRN] User with ID: 13 not found for orders request
2026-01-28 23:02:17.542 +02:00 [INF] HTTP GET /api/User/13/orders responded 404 in 56.8405 ms
2026-01-28 23:02:27.921 +02:00 [INF] Updating package 1 for user 13 with amount 1
2026-01-28 23:02:28.000 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 79.3041 ms
2026-01-28 23:02:29.080 +02:00 [INF] Updating package 1 for user 13 with amount 2
2026-01-28 23:02:29.124 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 43.9509 ms
2026-01-28 23:02:32.371 +02:00 [INF] Fetching user with orders for ID: 13
2026-01-28 23:02:32.375 +02:00 [INF] שולף משתמש 13 עם הזמנות.
2026-01-28 23:02:32.411 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 13
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:02:32.412 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:02:32.416 +02:00 [WRN] User with ID: 13 not found for orders request
2026-01-28 23:02:32.420 +02:00 [INF] HTTP GET /api/User/13/orders responded 404 in 49.2940 ms
2026-01-28 23:02:32.421 +02:00 [INF] HTTP GET /api/Packages responded 200 in 9.6496 ms
2026-01-28 23:02:47.500 +02:00 [INF] Fetching user with orders for ID: 13
2026-01-28 23:02:47.503 +02:00 [INF] שולף משתמש 13 עם הזמנות.
2026-01-28 23:02:47.571 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 13
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:02:47.580 +02:00 [WRN] User with ID: 13 not found for orders request
2026-01-28 23:02:47.604 +02:00 [INF] HTTP GET /api/User/13/orders responded 404 in 105.2860 ms
2026-01-28 23:04:01.204 +02:00 [INF] HTTP POST /api/User/register responded 400 in 39.4514 ms
2026-01-28 23:04:43.832 +02:00 [INF] Attempting to register user with email: 12@gmail.com
2026-01-28 23:04:43.840 +02:00 [INF] ניסיון רישום משתמש חדש: 12@gmail.com
2026-01-28 23:04:44.173 +02:00 [INF] משתמש נרשם בהצלחה: 14
2026-01-28 23:04:44.178 +02:00 [INF] HTTP POST /api/User/register responded 200 in 349.8773 ms
2026-01-28 23:04:53.055 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:04:53.083 +02:00 [INF] HTTP GET /api/Packages responded 200 in 29.2404 ms
2026-01-28 23:04:59.888 +02:00 [INF] Updating package 3 for user 14 with amount 1
2026-01-28 23:04:59.995 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 107.6831 ms
2026-01-28 23:05:05.839 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:05:05.840 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:05:05.901 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:05:05.906 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:05:05.906 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:05:05.907 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 69.1769 ms
2026-01-28 23:05:05.915 +02:00 [INF] HTTP GET /api/Packages responded 200 in 9.0397 ms
2026-01-28 23:11:22.098 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:11:22.100 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:11:22.136 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:11:22.141 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:11:22.143 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 44.7961 ms
2026-01-28 23:11:22.175 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:11:22.183 +02:00 [INF] HTTP GET /api/Packages responded 200 in 8.0744 ms
2026-01-28 23:12:22.197 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:12:22.205 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:12:22.257 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:12:22.263 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:12:22.264 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:12:22.266 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 70.0921 ms
2026-01-28 23:12:22.278 +02:00 [INF] HTTP GET /api/Packages responded 200 in 14.3353 ms
2026-01-28 23:12:25.288 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:12:25.290 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:12:25.320 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:12:25.326 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:12:25.327 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 39.5609 ms
2026-01-28 23:12:25.337 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:12:25.342 +02:00 [INF] HTTP GET /api/Packages responded 200 in 5.4815 ms
2026-01-28 23:16:24.511 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:16:24.513 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:16:24.562 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:16:24.574 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:16:24.576 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:16:24.582 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 71.5634 ms
2026-01-28 23:16:24.587 +02:00 [INF] HTTP GET /api/Packages responded 200 in 13.2361 ms
2026-01-28 23:17:04.871 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:17:04.874 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:17:04.916 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:17:04.935 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:17:04.939 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:17:04.942 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 72.0808 ms
2026-01-28 23:17:04.957 +02:00 [INF] HTTP GET /api/Packages responded 200 in 24.2956 ms
2026-01-28 23:17:08.237 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:17:08.240 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:17:08.271 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:17:08.276 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:17:08.276 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:17:08.277 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 40.0370 ms
2026-01-28 23:17:08.287 +02:00 [INF] HTTP GET /api/Packages responded 200 in 10.8149 ms
2026-01-28 23:17:10.195 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:17:10.196 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:17:10.230 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:17:10.235 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:17:10.237 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 42.5115 ms
2026-01-28 23:17:10.243 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:17:10.248 +02:00 [INF] HTTP GET /api/Packages responded 200 in 5.3439 ms
2026-01-28 23:18:23.265 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:18:23.267 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:18:23.312 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:18:23.321 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:18:23.322 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:18:23.327 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 62.2639 ms
2026-01-28 23:18:23.333 +02:00 [INF] HTTP GET /api/Packages responded 200 in 12.8235 ms
2026-01-28 23:18:27.870 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:18:27.877 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:18:27.880 +02:00 [INF] HTTP GET /api/Packages responded 200 in 10.2402 ms
2026-01-28 23:18:27.880 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:18:27.933 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:18:27.936 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:18:27.938 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 61.9431 ms
2026-01-28 23:18:30.406 +02:00 [INF] Updating package 1 for user 14 with amount 1
2026-01-28 23:18:30.470 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 64.7211 ms
2026-01-28 23:18:31.422 +02:00 [INF] Updating package 1 for user 14 with amount 2
2026-01-28 23:18:31.448 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 26.4884 ms
2026-01-28 23:18:32.285 +02:00 [INF] Updating package 1 for user 14 with amount 3
2026-01-28 23:18:32.322 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 37.3743 ms
2026-01-28 23:18:34.154 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:18:34.156 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:18:34.169 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:18:34.195 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:18:34.199 +02:00 [INF] HTTP GET /api/Packages responded 200 in 31.8040 ms
2026-01-28 23:18:34.200 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:18:34.203 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 49.7905 ms
2026-01-28 23:22:24.679 +02:00 [INF] Updating package 2 for user 14 with amount 1
2026-01-28 23:22:24.743 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 71.4276 ms
2026-01-28 23:22:24.928 +02:00 [INF] Updating package 2 for user 14 with amount 2
2026-01-28 23:22:24.975 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 48.0073 ms
2026-01-28 23:22:27.129 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:22:27.129 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:22:27.130 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:22:27.135 +02:00 [INF] HTTP GET /api/Packages responded 200 in 5.8409 ms
2026-01-28 23:22:27.175 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:22:27.180 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:22:27.185 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 56.1071 ms
2026-01-28 23:24:04.509 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:24:04.547 +02:00 [INF] HTTP GET /api/Packages responded 200 in 38.8494 ms
2026-01-28 23:24:32.175 +02:00 [INF] Updating package 1 for user 14 with amount 1
2026-01-28 23:24:32.251 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 82.4691 ms
2026-01-28 23:24:34.328 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:24:34.337 +02:00 [INF] HTTP GET /api/Packages responded 200 in 9.4396 ms
2026-01-28 23:25:16.633 +02:00 [INF] HTTP GET /api/Orders/update-package responded 405 in 0.8246 ms
2026-01-28 23:27:00.453 +02:00 [INF] HTTP GET /api/Orders/update-package responded 405 in 0.3150 ms
2026-01-28 23:27:06.095 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:27:06.138 +02:00 [INF] HTTP GET /api/Packages responded 200 in 43.2726 ms
2026-01-28 23:27:33.659 +02:00 [INF] Updating package 2 for user 14 with amount 1
2026-01-28 23:27:33.711 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 57.3366 ms
2026-01-28 23:27:34.549 +02:00 [INF] Updating package 2 for user 14 with amount 2
2026-01-28 23:27:34.600 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 51.9665 ms
2026-01-28 23:27:35.975 +02:00 [INF] Updating package 2 for user 14 with amount 3
2026-01-28 23:27:36.062 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 86.7781 ms
2026-01-28 23:36:07.079 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:36:07.081 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:36:07.107 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:36:07.250 +02:00 [INF] HTTP GET /api/Packages responded 200 in 142.7481 ms
2026-01-28 23:36:07.285 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:36:07.349 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:36:07.352 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 274.0060 ms
2026-01-28 23:36:12.803 +02:00 [INF] Updating package 1 for user 14 with amount 1
2026-01-28 23:36:12.887 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 85.3430 ms
2026-01-28 23:36:13.665 +02:00 [INF] Updating package 1 for user 14 with amount 2
2026-01-28 23:36:13.694 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 29.8385 ms
2026-01-28 23:36:16.146 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:36:16.149 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:36:16.187 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:36:16.190 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:36:16.192 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 46.1864 ms
2026-01-28 23:36:16.194 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:36:16.200 +02:00 [INF] HTTP GET /api/Packages responded 200 in 5.6784 ms
2026-01-28 23:37:36.203 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:37:36.204 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:37:36.249 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:37:36.264 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:37:36.267 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:37:36.272 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 69.2862 ms
2026-01-28 23:37:36.273 +02:00 [INF] HTTP GET /api/Packages responded 200 in 14.2155 ms
2026-01-28 23:38:14.316 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:38:14.318 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:38:14.360 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:38:14.404 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:38:14.404 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:38:14.409 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 94.5688 ms
2026-01-28 23:38:14.410 +02:00 [INF] HTTP GET /api/Packages responded 200 in 6.2952 ms
2026-01-28 23:38:30.321 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:38:30.323 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:38:30.362 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:38:30.367 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:38:30.371 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 50.6722 ms
2026-01-28 23:38:30.386 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:38:30.394 +02:00 [INF] HTTP GET /api/Packages responded 200 in 7.6137 ms
2026-01-28 23:38:33.744 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:38:33.748 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:38:33.759 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:38:33.781 +02:00 [INF] HTTP GET /api/Packages responded 200 in 37.6510 ms
2026-01-28 23:38:33.815 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:38:33.819 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:38:33.821 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 74.2096 ms
2026-01-28 23:38:38.234 +02:00 [INF] Updating package 1 for user 14 with amount 1
2026-01-28 23:38:38.317 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 82.8370 ms
2026-01-28 23:38:40.016 +02:00 [INF] Updating package 1 for user 14 with amount 2
2026-01-28 23:38:40.040 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 24.0942 ms
2026-01-28 23:38:41.591 +02:00 [INF] Updating package 1 for user 14 with amount 3
2026-01-28 23:38:41.630 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 38.9816 ms
2026-01-28 23:38:45.153 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:38:45.155 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:38:45.227 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:38:45.227 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:38:45.233 +02:00 [INF] HTTP GET /api/Packages responded 200 in 53.4582 ms
2026-01-28 23:38:45.234 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:38:45.237 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 84.7890 ms
2026-01-28 23:39:02.379 +02:00 [INF] Updating package 2 for user 14 with amount 1
2026-01-28 23:39:02.403 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 24.6946 ms
2026-01-28 23:39:03.548 +02:00 [INF] Updating package 2 for user 14 with amount 2
2026-01-28 23:39:03.587 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 39.3325 ms
2026-01-28 23:40:45.345 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:40:45.346 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:40:45.347 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:40:45.365 +02:00 [INF] HTTP GET /api/Packages responded 200 in 18.5146 ms
2026-01-28 23:40:45.399 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:40:45.403 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:40:45.404 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 59.3636 ms
2026-01-28 23:41:07.295 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:41:07.304 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:41:07.318 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:41:07.324 +02:00 [INF] HTTP GET /api/Packages responded 200 in 6.2124 ms
2026-01-28 23:41:07.360 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:41:07.364 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:41:07.366 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 71.5668 ms
2026-01-28 23:41:10.510 +02:00 [INF] Updating package 1 for user 14 with amount 1
2026-01-28 23:41:10.578 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 68.3614 ms
2026-01-28 23:41:12.707 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:41:12.708 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:41:12.711 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:41:12.712 +02:00 [INF] HTTP GET /api/Packages responded 200 in 5.9568 ms
2026-01-28 23:41:12.746 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:41:12.749 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:41:12.751 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 43.1426 ms
2026-01-28 23:42:11.546 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:42:11.548 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:42:11.582 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:42:11.608 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:42:11.613 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:42:11.614 +02:00 [INF] HTTP GET /api/Packages responded 200 in 32.1976 ms
2026-01-28 23:42:11.614 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 71.0681 ms
2026-01-28 23:44:16.453 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:44:16.455 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:44:16.464 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:44:16.474 +02:00 [INF] HTTP GET /api/Packages responded 200 in 10.2883 ms
2026-01-28 23:44:16.501 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:44:16.514 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:44:16.515 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 62.1781 ms
2026-01-28 23:44:18.805 +02:00 [INF] Updating package 1 for user 14 with amount 1
2026-01-28 23:44:18.872 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 67.3623 ms
2026-01-28 23:44:19.024 +02:00 [INF] Updating package 1 for user 14 with amount 2
2026-01-28 23:44:19.051 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 28.0810 ms
2026-01-28 23:44:21.709 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:44:21.710 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:44:21.748 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:44:21.753 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:44:21.757 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 48.2461 ms
2026-01-28 23:44:21.758 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:44:21.765 +02:00 [INF] HTTP GET /api/Packages responded 200 in 7.2999 ms
2026-01-28 23:44:41.142 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:44:41.158 +02:00 [INF] HTTP GET /api/Packages responded 200 in 16.3428 ms
2026-01-28 23:44:50.227 +02:00 [INF] Updating package 1 for user 14 with amount 1
2026-01-28 23:44:50.254 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 27.5754 ms
2026-01-28 23:44:50.945 +02:00 [INF] Updating package 1 for user 14 with amount 2
2026-01-28 23:44:50.987 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 42.2734 ms
2026-01-28 23:44:59.576 +02:00 [INF] HTTP GET /api/Orders/update-package responded 405 in 0.1824 ms
2026-01-28 23:45:46.206 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:45:46.209 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:45:46.245 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:45:46.279 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:45:46.287 +02:00 [INF] HTTP GET /api/Packages responded 200 in 41.4049 ms
2026-01-28 23:45:46.301 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:45:46.305 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 102.5323 ms
2026-01-28 23:48:13.701 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:48:13.710 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:48:13.716 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:48:13.759 +02:00 [INF] HTTP GET /api/Packages responded 200 in 47.9378 ms
2026-01-28 23:48:13.789 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:48:13.792 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:48:13.794 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 120.0209 ms
2026-01-28 23:48:32.366 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:48:32.368 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:48:32.413 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:48:32.417 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:48:32.419 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:48:32.420 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 54.4570 ms
2026-01-28 23:48:32.430 +02:00 [INF] HTTP GET /api/Packages responded 200 in 10.6080 ms
2026-01-28 23:48:40.419 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:48:40.420 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:48:40.424 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:48:40.428 +02:00 [INF] HTTP GET /api/Packages responded 200 in 9.4580 ms
2026-01-28 23:48:40.472 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:48:40.477 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:48:40.479 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 58.7263 ms
2026-01-28 23:48:43.003 +02:00 [INF] Updating package 1 for user 14 with amount 1
2026-01-28 23:48:43.063 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 61.1375 ms
2026-01-28 23:48:44.021 +02:00 [INF] Updating package 1 for user 14 with amount 2
2026-01-28 23:48:44.049 +02:00 [INF] HTTP POST /api/Orders/update-package responded 200 in 29.1793 ms
2026-01-28 23:48:47.160 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:48:47.163 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:48:47.165 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:48:47.204 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:48:47.206 +02:00 [INF] HTTP GET /api/Packages responded 200 in 41.6127 ms
2026-01-28 23:48:47.209 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:48:47.213 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 53.2257 ms
2026-01-28 23:48:53.173 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:48:53.176 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:48:53.241 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:48:53.251 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:48:53.255 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 82.1020 ms
2026-01-28 23:56:06.144 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:56:06.145 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:56:06.221 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:56:06.361 +02:00 [INF] HTTP GET /api/Packages responded 200 in 140.5615 ms
2026-01-28 23:56:06.394 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:56:06.403 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:56:06.405 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 261.5594 ms
2026-01-28 23:56:25.546 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:56:25.548 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:56:25.588 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:56:25.593 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:56:25.595 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:56:25.596 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 50.4575 ms
2026-01-28 23:56:25.602 +02:00 [INF] HTTP GET /api/Packages responded 200 in 7.2006 ms
2026-01-28 23:59:33.557 +02:00 [INF] Fetching user with orders for ID: 14
2026-01-28 23:59:33.561 +02:00 [INF] שולף משתמש 14 עם הזמנות.
2026-01-28 23:59:33.568 +02:00 [INF] שולף את כל החבילות.
2026-01-28 23:59:33.598 +02:00 [ERR] שגיאה בשליפת משתמש והזמנות עבור מזהה 14
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at ChineseAuctionAPI.Services.UserService.<>c.<GetUserWithOrdersAsync>b__8_0(Order o) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 97
   at System.Linq.Enumerable.SelectEnumerableIterator`2.ToList()
   at ChineseAuctionAPI.Services.UserService.GetUserWithOrdersAsync(Int32 userId) in C:\Users\User\Documents\Handesaim\api_angular_proj\ChineseAuction.Api.Angular\ChineseAuctionAPI\ChineseAuctionAPI\Services\UserService.cs:line 93
2026-01-28 23:59:33.598 +02:00 [INF] HTTP GET /api/Packages responded 200 in 30.7915 ms
2026-01-28 23:59:33.602 +02:00 [WRN] User with ID: 14 not found for orders request
2026-01-28 23:59:33.608 +02:00 [INF] HTTP GET /api/User/14/orders responded 404 in 76.7107 ms
